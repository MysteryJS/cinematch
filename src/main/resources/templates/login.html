<!doctype html>
<html lang="el" xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Sign up / Login</title>
  <link rel="stylesheet" href="/login/login.css">
</head>

<style>
    .lang-switcher {
      position: absolute;
      top: 20px;
      right: 20px;
      display: flex;
      align-items: center;
    }

    .lang-btn {
      background: rgba(0, 0, 0, 0.1);
      border: 1px solid #333;
      color: #333;
      padding: 5px 10px;
      cursor: pointer;
      border-radius: 5px;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: background 0.3s;
    }

    .lang-btn:hover {
      background: rgba(0, 0, 0, 0.2);
    }

    .lang-btn img {
      width: 20px;
      height: auto;
      border-radius: 2px;
    }
</style>

<body>
  <a href="/" class="logo-link" title="CineMatch">
    <img src="/logo.png" alt="CineMatch logo" class="logo-img">
  </a>
  <div class="lang-switcher">
    <button id="lang-btn" class="lang-btn">
      <img id="lang-flag" src="https://flagcdn.com/w40/gb.png" alt="English">
      <span id="lang-text">EN</span>
    </button>
</div>
  <h1>Sign up / Login</h1>
  <div id="feedback" class="msg hidden"></div>

  <section>
    <h2>sign up</h2>
    <form id="registerForm" autocomplete="off">
      <label>Username</label>
      <input type="text" id="regName" pattern="^[a-z_]+$" maxlength="30" required />
      <small>Only lowercase and "_", no spaces or uppercase</small>
      <label>Email</label>
      <input type="email" id="regEmail" maxlength="255" required />
      <label>Password (at least 6 characters)</label>
      <input type="password" id="regPassword" minlength="6" required />
      <button type="submit">sign up</button>
    </form>
  </section>

  <section>
    <h2>Login</h2>
    <form method="post" action="/login">
      <label>Username</label>
      <input type="text" name="username" maxlength="30" required />
      <label>Password</label>
      <input type="password" name="password" required />
      <button type="submit">Login</button>
      <div th:if="${param.error}" style="color: red;">Wrong Username or password!</div>
      <div th:if="${param.logout}" style="color: green;">You have been disconnected!</div>
    </form>
  </section>

  <div class="footer-bottom">
    <div class="footer-container">
      <p class="small">&copy; <span id="year">2025</span> CineMatch — All rights reserved.</p>
      <p class="small muted">Designed with ❤ for movie lovers.</p>
      <a href="/TOU" class="footer-link" style="margin-top:10px; display:inline-block;">Terms of Use</a>
    </div>
  </div>

  <script src="/login/login.js"></script>
  <script>
document.addEventListener("DOMContentLoaded", function () {
    const langBtn = document.getElementById("lang-btn");
    const langFlag = document.getElementById("lang-flag");
    const langText = document.getElementById("lang-text");

    const translations = {
        en: {
            mainTitle: "Sign up / Login",
            signupTitle: "sign up",
            loginTitle: "Login",
            username: "Username",
            email: "Email",
            password: "Password",
            passwordHint: "Password (at least 6 characters)",
            regHint: "Only lowercase and \"_\", no spaces or uppercase",
            signupBtn: "sign up",
            loginBtn: "Login",
            rights: "All rights reserved.",
            designed: "Designed with ❤ for movie lovers.",
            tou: "Terms of Use",
            flag: "https://flagcdn.com/w40/gr.png", btnText: "GR"
        },
        el: {
            mainTitle: "Εγγραφή / Σύνδεση",
            signupTitle: "εγγραφή",
            loginTitle: "Σύνδεση",
            username: "Όνομα Χρήστη",
            email: "Email",
            password: "Κωδικός",
            passwordHint: "Κωδικός (τουλάχιστον 6 χαρακτήρες)",
            regHint: "Μόνο πεζά και \"_\", χωρίς κενά ή κεφαλαία",
            signupBtn: "εγγραφή",
            loginBtn: "Σύνδεση",
            rights: "Με επιφύλαξη παντός δικαιώματος.",
            designed: "Σχεδιάστηκε με ❤ για τους λάτρεις του σινεμά.",
            tou: "Όροι Χρήσης",
            flag: "https://flagcdn.com/w40/gb.png", btnText: "EN"
        }
    };

    let currentLang = "en";

    langBtn.addEventListener("click", () => {
        currentLang = currentLang === "en" ? "el" : "en";
        const t = translations[currentLang];

        // Τίτλοι
        document.querySelector("h1").textContent = t.mainTitle;
        document.querySelectorAll("h2")[0].textContent = t.signupTitle;
        document.querySelectorAll("h2")[1].textContent = t.loginTitle;

        // Labels Εγγραφής
        const regLabels = document.querySelectorAll("#registerForm label");
        regLabels[0].textContent = t.username;
        regLabels[1].textContent = t.email;
        regLabels[2].textContent = t.passwordHint;
        document.querySelector("#registerForm small").textContent = t.regHint;
        document.querySelector("#registerForm button").textContent = t.signupBtn;

        // Labels Σύνδεσης
        const loginLabels = document.querySelectorAll("form[action='/login'] label");
        loginLabels[0].textContent = t.username;
        loginLabels[1].textContent = t.password;
        document.querySelector("form[action='/login'] button").textContent = t.loginBtn;

        // Footer
        document.querySelector(".footer-bottom .small").childNodes[2].textContent = " CineMatch — " + t.rights;
        document.querySelectorAll(".footer-bottom .small")[1].textContent = t.designed;
        document.querySelector(".footer-link").textContent = t.tou;

        // Κουμπί Γλώσσας
        langFlag.src = t.flag;
        langText.textContent = t.btnText;
    });
});
</script>

</body>

</html>
